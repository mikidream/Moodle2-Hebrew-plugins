$(document).ready(function(){var a=window.location.protocol+"//"+window.location.hostname+"/";var b=window.location.href;var c=a+"my/index.php";$("[class^=shdetails]").live("click",function(){var b=$(this).attr("value");var c=$("#course_"+b).css("display");if(c=="none"){$("#course_"+b).show();$(".shimage_"+b).attr("src",a+"/theme/image.php?theme=utstandard&image=myminus&component=block_viewizer")}else{$("#course_"+b).hide();$(".shimage_"+b).attr("src",a+"theme/image.php?theme=utstandard&image=myplus&component=block_viewizer")}});$("[class^=page]").live("click",function(){var b=$(this).attr("value");$(".block_viewizer .content .viewizercourses").html('<div align="center"><img src="'+a+'/blocks/viewizer/pix/ajax-loader.gif"></div>');$.ajax({url:c+"?page="+b,cache:false,success:function(a){var b=$(a).find(".block_viewizer .content .viewizercourses").html();var c=$(a).find(".block_viewizer .content #coursesbypage").html();$(".block_viewizer .content .viewizercourses").replaceWith('<div class="viewizercourses">'+b+"</div>");$(".block_viewizer .content #coursesbypage").replaceWith('<div id="coursesbypage">'+c+"</div>")}})});$("[class^=viewizer_important]").live("click",function(){var b=$(this).attr("value");var d=$(this).attr("name");var e=$(".block_viewizer #coursesbypage .currpage").attr("value");var f=$(".block_viewizer .content").find(".viewizerimportant").html();var g=[];$(".block_viewizer .content .viewizerimportant .headingcontainer").each(function(a){g.push($(this).find(".viewizer_important").attr("value"))});if(d=="add"&&jQuery.inArray(b,g)>-1){alert("Already added!");return false}if(f!=null){$(".block_viewizer .content .viewizerimportant").html('<div align="center"><img src="'+a+'/blocks/viewizer/pix/ajax-loader.gif"></div>')}else{$(".block_viewizer .content #viewizer_courses").prepend('<div class="box coursebox viewizerimportant"><div align="center"><img src="'+a+'/blocks/viewizer/pix/ajax-loader.gif"></div></div>')}$.ajax({type:"POST",url:a+"blocks/viewizer/ajax.php",cache:false,data:"mod=viewizer&action="+d+"&id="+b,success:function(a){$.ajax({url:c+"?page="+e,cache:false,success:function(a){var b=$(a).find(".block_viewizer .content .viewizerimportant").html();if(b==null){$(".block_viewizer .content .viewizerimportant").remove()}else{$(".block_viewizer .content .viewizerimportant").replaceWith('<div class="box coursebox viewizerimportant">'+b+"</div>")}}})}})})})